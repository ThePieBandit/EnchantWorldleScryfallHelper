# EnchantWorldleScryfallHelper
A bookmarklet for the [Enchant Worldle](https://enchantworldle.com/) game to help with scryfall searches, generated from the included script file using https://mrcoles.com/bookmarklet/. It's not perfect but it's pretty cool.

Bookmarklet code:

```javascript:(function()%7Blet%20debug%20%3D%20true%3Blet%20scryfallQuery%20%3D%20%22game%3Apaper%20-is%3Areprint%20order%3Areleased%22%3Bfunction%20isIterable(obj)%20%7Bif%20(obj%20%3D%3D%20null)%20%7Breturn%20false%3B%7Dreturn%20typeof%20obj%20!%3D%20%22string%22%20%26%26%20typeof%20obj%5BSymbol.iterator%5D%20%3D%3D%3D%20%22function%22%3B%7Dfunction%20getComplexQuery(keyword%2C%20styleClassName%2C%20dataFunc%2C%20allData)%20%7Blet%20impossibleGroups%20%3D%20new%20Set(%5B%5D)%3Blet%20possibleGroups%20%3D%20new%20Map()%3Bconst%20elements%20%3D%20document.getElementsByClassName(styleClassName)%3Bfor%20(let%20guess%20of%20elements)%20%7Blet%20data%20%3D%20dataFunc(guess)%3Bif%20(debug)%20%7Bconsole.log(%60data%3A%20%24%7Bdata%7D%60)%3B%7Dif%20(guess.classList.contains(%22correct%22))%20%7Bif%20(allData%20!%3D%20undefined%20%26%26%20allData%20!%3D%20null%20%26%26%20allData.length%20%26%26allData.length%20%3E%200)%20%7BallData.forEach((datum)%20%3D%3E%20impossibleGroups.add(datum))%3Bdata.forEach((datum)%20%3D%3E%20impossibleGroups.delete(datum))%3B%7Ddata.forEach((datum)%20%3D%3E%20%7Bif(datum%20!%3D%20%22%22)%20%7BpossibleGroups.set(datum%2C%20100)%3B%7D%7D)%3B%7D%20else%20if%20(guess.firstChild.lastChild.style.background.startsWith(%22linear-gradient%22))%20%7Blet%20percentCorrect%20%3D%20guess.firstChild.lastChild.style.background.matchAll(%2F0%25%2C%20var%5C(--almost-correct-color%5C)%20(%5B0-9.%5D%2B)%25%2C%20var%2Fg).next().value%5B1%5D%3Bif(percentCorrect%20%3E%2099)%20%7Bdata.forEach((datum)%20%3D%3E%20%7Bif(datum%20!%3D%20%22%22)%20%7BpossibleGroups.set(datum%2C%20100)%3B%7D%7D)%3B%7D%20else%20%7BpossibleGroups.set(data%2C%20percentCorrect)%3B%7D%7D%20else%20%7Bdata.forEach((datum)%20%3D%3E%20impossibleGroups.add(datum))%3B%7D%7Dconsole.log(possibleGroups)%3Bconst%20op%20%3D%20(keyword%20%3D%3D%3D%20%22id%22%20%3F%20%22%3E%3D%22%20%3A%20%22%3A%22)%3Blet%20query%20%3D%20%22%20%22%3Bfor%20(let%20group%20of%20impossibleGroups)%20%7Bif%20(isIterable(group))%20%7B%7D%20else%20%7Bif(group%20%3D%3D%3D%20%22colourless%22)%20%7Bquery%20%2B%3D%20%60%20%24%7Bkeyword%7D%3E%24%7Bgroup%7D%60%3B%7D%20else%20%7Bquery%20%2B%3D%20%60%20-%24%7Bkeyword%7D%24%7Bop%7D%24%7Bgroup%7D%60%3B%7D%7D%7Dquery%20%2B%3D%20%22%20%22%3Bfor%20(const%20group%20of%20possibleGroups)%20%7Bif%20(isIterable(group%5B0%5D))%20%7Bquery%20%2B%3D%20%60%20(%60%3Bgroup%5B0%5D.forEach((data%2C%20negatedIndex)%20%3D%3E%20%7Bif%20(negatedIndex%20%3E%200)%20query%20%2B%3D%20%60%20OR%60%3Bquery%20%2B%3D%20%60%20(%60%3Bgroup%5B0%5D.forEach((datum%2C%20index)%20%3D%3E%20%7Bquery%20%2B%3D%60%20%24%7B(negatedIndex%20%3D%3D%3D%20index%20%5E%20group%5B1%5D%20%3C%2050)%20%3F%20'-'%20%3A%20''%7D%24%7Bkeyword%7D%24%7Bop%7D%24%7Bdatum%7D%60%3B%7D)%3Bquery%20%2B%3D%20%22%20)%22%3B%7D)%3Bquery%20%2B%3D%20%60%20)%60%3B%7D%20else%20%7Bquery%20%2B%3D%20%60%20%24%7Bkeyword%7D%24%7Bop%7D%24%7Bgroup%5B0%5D%7D%60%3B%7D%7Dquery%20%2B%3D%20%22%20%22%3Bif%20(debug)%20%7Bconsole.log(%60%24%7BstyleClassName%7D%3A%20%24%7Bquery%7D%60)%3B%7Dreturn%20query%3B%7Dfunction%20getMvQuery(styleClassName)%20%7Blet%20minManaValue%20%3D%20-1%3Blet%20maxManaValue%20%3D%2030%3Bfor%20(let%20guess%20of%20document.getElementsByClassName(styleClassName))%20%7Bconst%20mv%20%3D%20parseInt(guess.firstChild.textContent%2C%2010)%3Bif%20(guess.classList.contains('correct'))%20%7BmaxManaValue%20%3D%20mv%20%2B%201%3BminManaValue%20%3D%20mv%20-%201%3B%7D%20else%20if%20(guess.classList.contains('almost-correct'))%20%7Bif%20(guess.classList.contains('down'))%20%7BmaxManaValue%20%3D%20Math.min(maxManaValue%2C%20mv)%3BminManaValue%20%3D%20Math.max(minManaValue%2C%20mv%20-%203)%3B%7D%20else%20%7BmaxManaValue%20%3D%20Math.min(maxManaValue%2C%20mv%20%2B%203)%3BminManaValue%20%3D%20Math.max(minManaValue%2C%20mv)%3B%7D%7D%20else%20if%20(guess.classList.contains('down'))%20%7BmaxManaValue%20%3D%20Math.min(maxManaValue%2C%20mv%20-%202)%3B%7D%20else%20%7BminManaValue%20%3D%20Math.max(minManaValue%2C%20mv%20%2B%202)%3B%7D%7Dlet%20query%20%3D%20%60%20mv%3E%24%7BminManaValue%7D%20mv%3C%24%7BmaxManaValue%7D%60%3Bif%20(debug)%20%7Bconsole.log(%60%24%7BstyleClassName%7D%3A%20%24%7Bquery%7D%60)%3B%7Dreturn%20query%3B%7Dfunction%20getSetYearQuery(styleClassName)%20%7Blet%20minYear%20%3D%201900%3Blet%20maxYear%20%3D%203000%3Bfor%20(const%20guess%20of%20document.getElementsByClassName(styleClassName))%20%7Blet%20year%20%3D%20parseInt(guess.textContent.replace(%22'%22%2C%20'')%2C%2010)%3Byear%20%3D%20(year%20%3E%2090)%20%3F%201900%20%2B%20year%20%3A%202000%20%2B%20year%3Bif%20(guess.classList.contains('correct')%20%7C%7C%20guess.classList.contains('almost-correct'))%20%7BminYear%20%3D%20year%20-%201%3BmaxYear%20%3D%20year%20%2B%201%3B%7D%20else%20if%20(guess.classList.contains('down'))%20%7BmaxYear%20%3D%20Math.min(maxYear%2C%20year)%3B%7D%20else%20%7BminYear%20%3D%20Math.max(minYear%2C%20year)%3B%7D%7Dlet%20query%20%3D%20%60%20year%3E%24%7BminYear%7D%20year%3C%24%7BmaxYear%7D%60%3Bif%20(debug)%20%7Bconsole.log(%60%24%7BstyleClassName%7D%3A%20%24%7Bquery%7D%60)%3B%7Dreturn%20query%3B%7Dfunction%20getRarityQuery(styleClassName)%20%7Bconst%20impossibleRarities%20%3D%20new%20Set(%5B%5D)%3Bfor%20(const%20guess%20of%20document.getElementsByClassName(styleClassName))%20%7Blet%20rarity%20%3D%20%5B...guess.firstChild.classList%5D.map((s)%20%3D%3E%20s.substring(6))%5B1%5D%3Bif%20(guess.classList.contains(%22correct%22))%20%7BimpossibleRarities.add(%22C%22)%3BimpossibleRarities.add(%22U%22)%3BimpossibleRarities.add(%22R%22)%3BimpossibleRarities.add(%22M%22)%3BimpossibleRarities.delete(rarity)%3B%7D%20else%20if%20(guess.lastChild.classList.contains(%22down%22))%20%7Bswitch%20(rarity)%20%7Bcase%20%22C%22%3AimpossibleRarities.add(%22C%22)%3Bcase%20%22U%22%3AimpossibleRarities.add(%22U%22)%3Bcase%20%22R%22%3AimpossibleRarities.add(%22R%22)%3Bcase%20%22M%22%3AimpossibleRarities.add(%22M%22)%3Bdefault%3Abreak%3B%7D%7D%20else%20%7Bswitch%20(rarity)%20%7Bcase%20%22M%22%3AimpossibleRarities.add(%22M%22)%3Bcase%20%22R%22%3AimpossibleRarities.add(%22R%22)%3Bcase%20%22U%22%3AimpossibleRarities.add(%22U%22)%3Bcase%20%22C%22%3AimpossibleRarities.add(%22C%22)%3Bdefault%3Abreak%3B%7D%7D%7Dlet%20query%20%3D%20%60%20%60%3Bfor%20(const%20notRarity%20of%20impossibleRarities)%20%7Bquery%20%2B%3D%20%60%20-r%3A%24%7BnotRarity%7D%60%3B%7Dif%20(debug)%20%7Bconsole.log(%60%24%7BstyleClassName%7D%3A%20%24%7Bquery%7D%60)%3B%7Dreturn%20query%3B%7DscryfallQuery%20%2B%3D%20getRarityQuery(%22guess-rarity%22)%3BscryfallQuery%20%2B%3D%20getComplexQuery(%22id%22%2C%20%22guess-colour%22%2C%20(guess)%20%3D%3E%20%5B...guess.firstChild.firstChild.children%5D.map(span%20%3D%3E%20span.classList%5B1%5D).map(s%20%3D%3E%20s.substring(15))%2C%20%5B%22W%22%2C%20%22U%22%2C%20%22B%22%2C%22R%22%2C%20%22G%22%5D)%3BscryfallQuery%20%2B%3D%20getComplexQuery(%22t%22%2C%20%22guess-type%22%2C%20(guess)%20%3D%3E%20guess.textContent.toLowerCase().split(%22%20%22)%2C%20%5B%22artifact%22%2C%20%22battle%22%2C%20%22creature%22%2C%20%22enchantment%22%2C%22instant%22%2C%20%22land%22%2C%20%22planeswalker%22%2C%20%22sorcery%22%2C%20%22tribal%22%2C%20%22kindred%22%5D)%3BscryfallQuery%20%2B%3D%20getComplexQuery(%22t%22%2C%20%22guess-subtype%22%2C%20(guess)%20%3D%3E%20guess.textContent.toLowerCase().split(%22%20%22))%3BscryfallQuery%20%2B%3D%20getMvQuery(%22guess-mv%22)%3BscryfallQuery%20%2B%3D%20getSetYearQuery(%22guess-set%22)%3Bif%20(debug)%20console.log(%22Query%3A%20%22%20%2B%20scryfallQuery)%3Bnavigator.clipboard.writeText(scryfallQuery)%7D)()```

